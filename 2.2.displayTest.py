''' 
This will display some test patterns onto the SW Maker LED Matrix

WiFi SSID:  SWMakerDraw
WiFi Password:  <there is none>
LED Matrix IP Address: 1.3.3.7

Usage:  python 2.2.displayTest.py

install Windows Python3 modules:
    py -3 -m pip install requests
    py -3 -m pip install Pillow
    py -3 -m pip list


'''

import requests
import time
import random
import PIL

teststring = 'ff000000ff000000ff505050'
skull = '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ff0000ff0000ff0000000000000000000000000000000000000000000000000000000000000000000000000000ff0000000000000000000000ff0000000000000000000000000000000000000000000000000000000000000000000000ff0000ff0000000000ff0000ff0000000000000000000000000000000000000000000000000000000000000000000000ff0000000000000000000000ff0000000000000000000000000000000000000000000000000000000000000000000000000000ff0000000000ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000ff0000000000ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000ff0000ff0000ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'
swmakers = '0000000000000000000000000000000000000000ff0000000000000000ff0000000000000000000000000000000000000000000000000000000000000000ff0000000000ff0000ff0000ff0000ff0000000000ff0000000000000000000000000000000000000000ff0000000000000000ff0000000000000000000000000000ff0000000000000000ff0000000000000000000000000000000000ff0000ff0000000000000000000000000000000000000000ff0000ff0000000000000000000000ff0000000000ff000000ffffffffffffffffff000000ffffff000000000000000000ffffff0000ff0000000000ff0000000000ff000000000000ffffff000000000000000000ffffff000000000000000000ffffff0000000000ff0000000000000000ff000000000000ffffffffffffffffff000000ffffff000000ffffff000000ffffff0000000000ff0000000000ff0000ff000000000000000000000000ffffff000000ffffff000000ffffff000000ffffff0000000000ff0000ff0000000000ff000000000000ffffffffffffffffff000000ffffffffffffffffffffffffffffff0000000000ff0000000000000000ff0000000000000000000000000000000000000000000000000000000000000000000000000000ff0000000000ff0000000000ff000000000000ffffffffffff000000000000ffffffffffff0000000000000000ff0000000000ff0000000000000000ff000000000000ffffff000000ffffffffffff000000ffffff0000000000000000ff0000000000000000000000000000000000ff0000ffffffff000000000000000000000000ffffff0000ff0000ff0000000000000000000000000000000000ff0000000000000000ff0000000000000000000000000000ff0000000000000000ff0000000000000000000000000000000000000000ff0000000000ff0000ff0000ff0000ff0000000000ff0000000000000000000000000000000000000000000000000000000000000000ff0000000000000000ff000000000000000000000000000000000000'

# display some pre-coded images
print("Display Skull")
try:
    # will fail miserably if the WiFi connection is lost.  Try and make it a bit better
    responce = requests.get('http://1.3.3.7/cc?pixels='+teststring)
    #responce = requests.get('http://1.3.3.7/cc?pixels='+skull)
except ConnectionAbortedError:
    print("Lost WiFi connection.  Exciting program")
    exit()
except:
    print("Something else went wrong. Exciting program.")
    exit()
print( responce)
time.sleep(1)
print("Display SW Makers")
try: 
    # will fail miserably if the WiFi connection is lost.  Try and make it a bit better
    response = requests.get('http://1.3.3.7/cc?pixels='+swmakers)
except ConnectionAbortedError:
    print("Lost WiFi connection.  Exciting program")
    exit()
except:
    print("Something else went wrong. Exciting program.")
    exit()
print( response)
time.sleep(1)
val = ''
count = 0

# test code to print a Random color pixels onto display
while True:
  print("display RND patern")
  for i in range(263):
    val = val + str(hex(random.randrange(255)).split('x')[-1]) + str(hex(random.randrange(255)).split('x')[-1]) + str(hex(random.randrange(255)).split('x')[-1])  
  try:
    # will fail miserably if the WiFi connection is lost.  Try and make it a bit better
    response = requests.get('http://1.3.3.7/cc?pixels='+val)
  except ConnectionAbortedError:
    print("Lost WiFi connection.  Exciting program")
    exit()
  except:
    print("Something else went wrong. Exciting program.")
    exit()
  print( val)
  print( count, len(val))
  print( response)
  time.sleep(1)
  val = ''
  count += 1
